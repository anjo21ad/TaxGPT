  PROCESS OPT(TIME);                                                    
 BH95020: /* OPSÆTNING TIL OG BEREGNING AF EJENDOMSVÆRDISKAT 2015  */   
 PROCEDURE (BH945_AR) REORDER;                                          
 /*********************************************************************/
                                                                        
 DCL COPYRIGHT CHAR (30) STATIC INIT ('COPYRIGHT KOMMUNEDATA I/S 2003');
                                                                        
 /*********************************************************************/
 /*      PROGRAMMERET AF AAGE RASMUSSEN, PUS T&S JUNI 2000            */
 /*                                                                   */
 /*   FORSKUD06  SUSANNE VILLUMSEN                    11/07-2005      */
 /*     TILRETTET FORSKUD2006                                         */
 /*   FORSKUD07  BO SCHMIDT                           15/05-2006      */
 /*     TILRETTET FORSKUD2007                                         */
 /*   FORSKUD08  BO SCHMIDT                           15/05-2007      */
 /*     TILRETTET FORSKUD2008                                         */
 /*   FORSKUD09  BO SCHMIDT                           23/06-2008      */
 /*     TILRETTET FORSKUD2009                                         */
 /*   FORSKUD10  GERD HOLM-PEDERSEN                   25/05-2009      */
 /*     TILRETTET FORSKUD2010: RULLET BR9->BR0 OG RUL                 */
 /*   FORSKUD11  GERD HOLM-PEDERSEN                   08/06-2010      */
 /*     TILRETTET FORSKUD2011: RULLET BR0->BR1 OG RUL                 */
 /*   FORSKUD11  GERD HOLM-PEDERSEN                   31/05-2011      */
 /*     TILRETTET FORSKUD2012: RULLET BR1->BR2 OG RUL                 */
 /*   FORSKUD13  ESBEN BRODERSEN                      06/06-2012      */
 /*     TILRETTET FORSKUD2013: RULLET BR2->BR3 OG RUL                 */
 /*   FORSKUD14  ESBEN BRODERSEN                      07/08-2013      */
 /*     TILRETTET FORSKUD2014: RULLET BR3->BR4 OG RUL                 */
 /*   FORSKUD15  JØRGEN SAUGMANN                      30/06-2014      */
 /*     TILRETTET FORSKUD2015: RULLET BR4->BR5 OG RUL                 */
 /*   FORSKUD16  JØRGEN SAUGMANN                      08/06-2014      */
 /*     TILRETTET FORSKUD2016: RULLET BR5->BR6 OG RUL                 */
 /*                            ESBEN BRODERSEN         MARTS 2016     */
 /*                            UDVIDET BRUG AF BH65300M  #01          */
 /*   FORSKUD17  ESBEN BRODERSEN                      09/06-2016      */
 /*     TILRETTET FORSKUD2017: RULLET BR6->BR7 OG RUL                 */
 /*     TILRETTET FORSKUD2018: RULLET BR7->BR8 OG RUL                 */
 /*********************************************************************/
         DEFAULT RANGE (*) STATIC;                                      
 /*********************************************************************/
 /*      DECLARE AF INPUT                                             */
 /*********************************************************************/
                                                                        
 DCL     BH945_AR        CHAR      (6000) VAR;                          
                                                                        
 DCL     1 BH945         BASED     (ADDR(BH945_AR)),                    
           3 LÆNGDE      BIN FIXED (15),                                
           %INCLUDE BH90100N;;                                          
                                                                        
 /*********************************************************************/
 /*      DECLARE AF DIVERSE PARAMETRE TIL KALD AF BR88610             */
 /*********************************************************************/
                                                                        
 DCL     1 BR886,                                                       
           %INCLUDE BR88610N;; /*RUL */                                 
                                                                        
 /*********************************************************************/
 /*      DECLARE AF DIVERSE                                           */
 /*********************************************************************/
                                                                        
 DCL     1 BH65300M,                                                    
           %INCLUDE BH65300M;                                           
                                                                        
 DCL     JA              BIT       (1)     INIT ('1'B);                 
 DCL     NEJ             BIT       (1)     INIT ('0'B);                 
 DCL     I               BIN FIXED (15);                                
 DCL     BR88610         ENTRY;                                         
 DCL     ADDR            BUILTIN;                                       
 /*********************************************************************/
 /*      P R O C E S S                                                */
 /*********************************************************************/
                                                                        
         IF (BH945.TIL_EVS.DAFSTAA = 0 !                                
             BH945.TIL_EVS.DAFSTAA > BH65300M.ÅR1231) &  /*#01*/        
             BH945.TIL_EVS.CEJBEVS = '0'                                
         THEN                                                           
            DO;                                                         
                                                                        
               BR886 = '';                                              
               BR886.DINDKAAR = FORSKÅR;                                
               BR886.STARTDATO = BH945.TIL_EVS.DOVTG;                   
               BR886.SLUTDATO = BH945.TIL_EVS.DAFSTAA;                  
                                                                        
               BR886 = BH945.TIL_EVS, BY NAME;                          
               BR886 = BH945.EJERSKAB, BY NAME;                         
               BR886 = BH945.EJENDOM, BY NAME;                          
               BR886.GPCTEJER = BH945.TIL_EVS.GPCTEJER * 100;           
               BR886.GPCTUDLE = BH945.TIL_EVS.GPCTUDLE * 100;           
               BR886.GPCTERHV = BH945.TIL_EVS.GPCTERHV * 100;           
               BR886 = BH945.FRA_EVS_SLUT, BY NAME;                     
               BR886 = BH945.TIL_EVS_FOR, BY NAME;                      
                                                                        
               IF BH945.EJERSKAB.CEJDTYPE > '0'                         
               THEN                                                     
                  BR886.CEJDTYPE = BH945.EJERSKAB.CEJDTYPE;             
               ELSE                                                     
                  BR886.CEJDTYPE = BH945.EJENDOM.CEJDTYPE;              
                                                                        
              CALL BR88610(BR886);                                      
                                                                        
              BH945.FRA_EVS_FOR = BR886, BY NAME;                       
              BH945.FEJLNR = BR886.RETURKODE;                           
          END;                                                          
                                                                        
 END BH95020;                                                           

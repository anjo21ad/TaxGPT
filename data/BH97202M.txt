 /*********************************************************************/
 /*      DANNE DATA TIL SLUT CSC VEDR. SUPPLEMENTSLEVERINGEN          */
 /*   SLUT09    GERD HOLM-PEDERSEN                        22/10-2011  */
 /*             KRAV 18-02: OPSÆTNING AF BEREGNINGSGRL. FOR UDL. EJ   */
 /*             HVOR FELT 614 (BBERGRL_015ANV) NU SKAL ANVENDES BÅDE  */
 /*             TIL DANSKE OG UDENLANDSKE EJENDOMME                   */
 /*  SLUT11    GERD HOLM-PEDERSEN                                     */
 /*            TILRETTET SLUT 2011 SAMT                    11/11-2011 */
 /*            KRAV 18-05: OPSÆTNING AF BEREGNINGSGRL. FOR UDL. EJD.  */
 /*            HVOR FELT 615,616,621,622 OG 626 OVERFØRES SOM 614     */
 /*            FELT 616 OG 626 SKAL IKKE OVERFØRES.        27/12-2011 */
 /*  SLUT14    Esben Brodersen                                        */
 /*            TILRETTET SLUT 2014 SAMT                    25/11-2014 */
 /*********************************************************************/
 DAN_DATA_TIL_SLUT: PROC;                                               
                                                                        
      BH972            = '';                                            
      BH972.INDVNR     = 810;                                           
      BH972.INDVLGD    = 556;                                           
      BH972.FELTLGD    = 556;                                           
      BH972.HEADER     = 'EVSGRUND';                                    
      BH972.DINDKAAR   = '2014';                    /*SLUT2014*/        
      BH972.DCPRN      = BH960.SORT_CPR;                                
      BH972.EKOMNR     = BH960.SORT_KOMNR;                              
      BH972.EEJDNR     = BH960.SORT_EJDNR;                              
      BH972.ELBNR      = BH960.UDSKRLBNR;                               
      BH972.CSLET      = ' ';                                           
      BH972.CLANDEKODE = BH960.EJENDOM.CLANDEKODE;                      
      BH972.CSKPLOMF  = BH960.TIL_EVS.CSKPLOMF;                         
      BH972.CEJBEVS   = BH960.TIL_EVS.CEJBEVS;                          
      BH972.BOBEHAKOD = ' ';                                            
      BH972.MANPENSSTI_I = -1;                                          
      BH972.MANPENSSTI = 0;                                             
      IF BH972.EKOMNR = 999    /*SLUT09 18-02 OG SLUT11 FRA*/           
      THEN                                                              
        DO;                                                             
           BH972.BBERGRL_015ANV_I  = BH960.EJERSKAB.UDL_614_SW;         
           BH972.BBERGRL_015ANV    = BH960.EJERSKAB.UDL_614;            
           BH972.BBERGRL_02ANV_I   = BH960.EJERSKAB.UDL_615_SW;         
           BH972.BBERGRL_02ANV     = BH960.EJERSKAB.UDL_615;            
           BH972.BBERGRL_AKT_I     = -1;                                
           BH972.BBERGRL_AKT       = 0;                                 
                                                                        
           BH972.BBER2FAM_015ANV_I = BH960.EJERSKAB.UDL_621_SW;         
           BH972.BBER2FAM_015ANV   = BH960.EJERSKAB.UDL_621;            
           BH972.BBER2FAM_02ANV_I  = BH960.EJERSKAB.UDL_622_SW;         
           BH972.BBER2FAM_02ANV    = BH960.EJERSKAB.UDL_622;            
           BH972.BBER2FAM_AKT_I    = -1;                                
           BH972.BBER2FAM_AKT      = 0;                                 
        END;                                                            
      ELSE                                                              
        DO;                    /*SLUT09 OG SLUT11 TIL*/                 
           BH972.BBERGRL_015ANV_I = BH960.VURD_015ANV.BBERGRL_015ANV_SW;
           BH972.BBERGRL_015ANV   = BH960.VURD_015ANV.BBERGRL_015ANV;   
           BH972.BBERGRL_02ANV_I  = BH960.VURD_02ANV.BBERGRL_02ANV_SW;  
           BH972.BBERGRL_02ANV    = BH960.VURD_02ANV.BBERGRL_02ANV;     
           BH972.BBERGRL_AKT_I    = BH960.VURD_AKT.BBERGRL_AKT_SW;      
           BH972.BBERGRL_AKT      = BH960.VURD_AKT.BBERGRL_AKT;         
                                                                        
           BH972.BBER2FAM_015ANV_I =                                    
                                   BH960.VURD_015ANV.BBER2FAM_015ANV_SW;
           BH972.BBER2FAM_015ANV  = BH960.VURD_015ANV.BBER2FAM_015ANV;  
           BH972.BBER2FAM_02ANV_I = BH960.VURD_02ANV.BBER2FAM_02ANV_SW; 
           BH972.BBER2FAM_02ANV   = BH960.VURD_02ANV.BBER2FAM_02ANV;    
           BH972.BBER2FAM_AKT_I   = BH960.VURD_AKT.BBER2FAM_AKT_SW;     
           BH972.BBER2FAM_AKT     = BH960.VURD_AKT.BBER2FAM_AKT;        
        END;                                                            
                                                                        
 /* 18-02BH972.BBERGRLUDL_01_I = BH960.EJERSKAB.BBERGRLUDL_01_SW;       
         BH972.BBERGRLUDL_01   = BH960.EJERSKAB.BBERGRLUDL_01;          
         BH972.BOMBTILBUDL_01_I = -1;                                   
         BH972.BOMBTILBUDL_01   = 0;                      SLUT09  */    
         BH972.EJDBELIG = BH960.EJENDOM.EJDBELIG;                       
         BH972.CEJDTYPE = BH960.VURD_AKT.CEJDTYPE_AKT;                  
         BH972.CÆGTOPR  = BH960.TIL_EVS.CÆGTOPR;                        
                                                                        
         IF BH960.TIL_EVS.DOVTG > 0                                     
         THEN                                                           
            BH972.DOVTG =                                               
            FIX09_TIL_DB2_DATO(BH960.TIL_EVS.DOVTG);                    
         ELSE                                                           
            BH972.DOVTG = (10)' ';                                      
                                                                        
         IF BH960.TIL_EVS.DAFSTAA > BH960.MT.DRGNÅRTIL                  
         THEN                                                           
            BH972.DAFSTAA = (10)' ';                                    
         ELSE                                                           
            IF BH960.TIL_EVS.DAFSTAA > 0                                
            THEN                                                        
               BH972.DAFSTAA =                                          
               FIX09_TIL_DB2_DATO(BH960.TIL_EVS.DAFSTAA);               
            ELSE                                                        
               BH972.DAFSTAA = (10)' ';                                 
                                                                        
         BH972.GPCTEJER_I = BH960.TIL_EVS.GPCTEJER_SW;                  
         BH972.GPCTEJER = BH960.TIL_EVS.GPCTEJER;                       
                                                                        
         BH972.FDAGUDLE = 0;                                            
         BH972.GPCTUDLE = 0;                                            
         BH972.FUDL100  = BH960.TIL_EVS.FUDL100;    /* 18-02 SLUT09 */  
         BH972.GPCTERHV = 0;                                            
         BH972.FDAGERHV = 0;                                            
         BH972.FERHVFLER = BH960.TIL_EVS.FERHVFLER;                     
         BH972.CENKE     = BH960.TIL_EVS.CENKE;                         
         BH972.CPTYPSLUT = BH960.TIL_EVS.CPTYPSLUT;                     
         BH972.CPTYPGL   = BH960.TIL_EVS.CPTYPGL;                       
         BH972.FELT759   = BH960.TIL_EVS.FELT759;                       
         BH972.FELT760 = BH960.TIL_EVS.CFRED;                           
         BH972.BEVSGL_I = BH960.TIL_EVS.BEVSGL_SW;                      
         BH972.BEVSGL   = BH960.TIL_EVS.BEVSGL;                         
         BH972.BPENSNEDGL_I = BH960.TIL_EVS.BPENSNEDGL_SW;              
         BH972.BPENSNEDGL = BH960.TIL_EVS.BPENSNEDGL;                   
                                                                        
         IF BH960.TIL_EVS.DINDFLYT > 0                                  
         THEN                                                           
            BH972.DINDFLYT =                                            
            FIX09_TIL_DB2_DATO(BH960.TIL_EVS.DINDFLYT);                 
                                                                        
         IF BH960.TIL_EVS.DFRAFLYT > 0                                  
         THEN                                                           
            BH972.DFRAFLYT =                                            
            FIX09_TIL_DB2_DATO(BH960.TIL_EVS.DFRAFLYT);                 
                                                                        
         BH972.FUBEBOELIG = 0;                                          
         BH972.BFASTSTIGBGR_I = BH960.TIL_EVS.BFASTSTIGBGR_SW;          
         BH972.BFASTSTIGBGR   = BH960.TIL_EVS.BFASTSTIGBGR;             
         BH972.CINDFLYT = ' ';                                          
         BH972.CBERGRGLOP   = BH960.EJERSKAB.CBERGRGLOP;                
         BH972.BMANEVSSTI_I = -1;                                       
         BH972.BMANEVSSTI    = 0;                                       
         BH972.BEVSMAN_I     = -1;                                      
         BH972.BEVSMAN       = 0;                                       
         BH972.BMANNEDSL_I   = -1;                                      
         BH972.BMANNEDSL     = 0;                                       
         BH972.CEKSEMP       = ' ';                                     
         BH972.MANNEDSLSTI_I = -1;                                      
         BH972.MANNEDSLSTI   = 0;                                       
         BH972.BUDLSKC_I     = -1;                                      
         BH972.BUDLSKC       = 0;                                       
         BH972.BEJBOL1_AKT_I = BH960.VURD_AKT.BEJBOL1_AKT_SW;           
         BH972.BEJBOL1_AKT   = BH960.VURD_AKT.BEJBOL1_AKT;              
         BH972.BEJBOL2_AKT_I = BH960.VURD_AKT.BEJBOL2_AKT_SW;           
         BH972.BEJBOL2_AKT   = BH960.VURD_AKT.BEJBOL2_AKT;              
         BH972.DAFSTAAFOR = BH960.TIL_EVS.DAFSTAAFOR;                   
         BH972.BEJBOL1_02ANV_I = BH960.VURD_02ANV.BEJBOL1_02ANV_SW;     
         BH972.BEJBOL1_02ANV = BH960.VURD_02ANV.BEJBOL1_02ANV;          
         BH972.BEJBOL2_02ANV_I = BH960.VURD_02ANV.BEJBOL2_02ANV_SW;     
         BH972.BEJBOL2_02ANV = BH960.VURD_02ANV.BEJBOL2_02ANV;          
         BH972.CBENYT = BH960.VURD_AKT.CBENYT_AKT;                      
         BH972.CSCREGISTMP = (26)' ';                                   
         BH972.CBERGRL  = BH960.EJENDOM.CBERGRL;                        
         BH972.BPROM2_I = BH960.FRA_EVS_BER.BPROM2_SW;                  
         BH972.BPROM2   = BH960.FRA_EVS_BER.BPROM2;                     
         BH972.BPROM1_I = BH960.FRA_EVS_BER.BPROM1_SW;                  
         BH972.BPROM1   = BH960.FRA_EVS_BER.BPROM1;                     
         BH972.CELØNCOR = BH960.TIL_EVS.CELØNCOR;                       
         BH972.GPCTEJERFOR = BH960.TIL_EVS.GPCTEJERFOR;                 
         BH972.CERHV = BH960.TIL_EVS.CERHV;                             
         BH972.CVURDOPR  = BH960.AKT_VURD.CVURDOPR;                     
         BH972.COMBYG    = BH960.EJENDOM.COMBYG;                        
                                                                        
         IF BH960.TIL_EVS.BPENSNEDGL_SW = 0                             
         THEN                                                           
            DO;                                                         
               BH972.BGLSUM1_I = BH960.TIL_EVS.BGLSUM1_SW;              
               BH972.BGLSUM1   = BH960.TIL_EVS.BGLSUM1;                 
            END;                                                        
         ELSE                                                           
            DO;                                                         
               BH972.BGLSUM1_I = -1;                                    
               BH972.BGLSUM1   = 0;                                     
            END;                                                        
                                                                        
         BH972.BBERGRL_I = BH960.EJERSKAB.BBERGRL_SW;                   
         BH972.BBERGRL    = BH960.EJERSKAB.BBERGRL;                     
         BH972.CBERGROP   = BH960.EJERSKAB.CBERGROP;                    
         BH972.BSTIBEGR_I = BH960.FRA_EVS_BER.BSTIBEGR_SW;              
         BH972.BSTIBEGR   = BH960.FRA_EVS_BER.BSTIBEGR;                 
                                                                        
         IF BH960.UDSKRLBNR = 1                                         
         THEN                                                           
            DO;                                                         
              BH972.BFORSKAT_I = BH960.TIL_EVS.BFORSKAT_SW;             
              BH972.BFORSKAT = BH960.TIL_EVS.BFORSKAT;                  
              BH972.CFORSKAT = BH960.TIL_EVS.CFORSKAT;                  
            END;                                                        
         ELSE                                                           
            DO;                                                         
              BH972.BFORSKAT_I = -1;                                    
              BH972.BFORSKAT = 0;                                       
              BH972.CFORSKAT = '2';                                     
            END;                                                        
                                                                        
         BH972.BNEDSL1_I = BH960.FRA_EVS_BER.BNEDSL1_SW;                
         BH972.BNEDSL1   = BH960.FRA_EVS_BER.BNEDSL1;                   
         BH972.BPENSNED_I = BH960.FRA_EVS_BER.BPENSNED_SW;              
         BH972.BPENSNED = BH960.FRA_EVS_BER.BPENSNED;                   
         BH972.BNEDSL2_I = BH960.FRA_EVS_BER.BNEDSL2_SW;                
         BH972.BNEDSL2   = BH960.FRA_EVS_BER.BNEDSL2;                   
         BH972.CNULSTIL = ' ';                                          
         BH972.CUDLMAN = BH960.TIL_EVS.CUDLMAN;                         
         BH972.BBER2FAM_I = BH960.EJERSKAB.BBER2FAM_SW;                 
         BH972.BBER2FAM    = BH960.EJERSKAB.BBER2FAM;                   
                                                                        
         IF BH960.FEJLNR > 0                                            
         THEN                                                           
            DO;                                                         
               HJ_FEJLNR = BH960.FEJLNR;                                
               BH972.FEJLNR = HJ_FEJLNR;                                
            END;                                                        
         ELSE                                                           
            BH972.FEJLNR = ' ';                                         
                                                                        
         BH972.BEJBOL1_015ANV_I =                                       
                       BH960.VURD_015ANV.BEJBOL1_015ANV_SW;             
         BH972.BEJBOL1_015ANV    =                                      
                       BH960.VURD_015ANV.BEJBOL1_015ANV;                
         BH972.BEJBOL2_015ANV_I =                                       
                       BH960.VURD_015ANV.BEJBOL2_015ANV_SW;             
         BH972.BEJBOL2_015ANV    =                                      
                       BH960.VURD_015ANV.BEJBOL2_015ANV;                
                                                                        
         IF BH960.TIL_EVS.EKOMNR_GL > 0                                 
         THEN                                                           
            DO;                                                         
               HJ_PIC3 = BH960.TIL_EVS.EKOMNR_GL;                       
               BH972.EKOMNR_GL = HJ_CHAR3;                              
               HJ_PIC7 = BH960.TIL_EVS.EEJDNR_GL;                       
               BH972.EEJDNR_GL = HJ_PIC7;                               
            END;                                                        
         ELSE                                                           
            DO;                                                         
               BH972.EKOMNR_GL = '   ';                                 
               BH972.EEJDNR_GL = (7)' ';                                
            END;                                                        
                                                                        
         BH972.CSKPLOMFGL = BH960.TIL_EVS.CSKPLOMFGL;                   
                                                                        
         BH972.DFRAGLD = BQ_UD.PERSON.DFRAGLD; /* OPSAT AF DATAMODUL */ 
                                                                        
         BH972.CNEDSL1 = BH960.TIL_EVS.CNEDSL1;                         
         BH972.FLEJL = BH960.VURD_AKT.FLEJL_AKT;                        
         BH972.BGRPROM2 = BH960.FRA_EVS_BER.BGRPROM2;                   
         BH972.BGRPROM2_I = BH960.FRA_EVS_BER.BGRPROM2_SW;              
         BH972.DOVTGFOR = BH960.TIL_EVS.DOVTGFOR;                       
         BH972.CSTIBLB   = BH960.FRA_EVS_BER.CSTIBLB;                   
         BH972.CDATAFRA = BH960.TIL_EVS.CDATAFRA;                       
         BH972.CUDLHEL   = BH960.TIL_EVS.CUDLHEL;                       
         BH972.CUDLDEL   = BH960.TIL_EVS.CUDLDEL;                       
         BH972.BGRPROM1 = BH960.FRA_EVS_BER.BGRPROM1;                   
         BH972.BGRPROM1_I = BH960.FRA_EVS_BER.BGRPROM1_SW;              
                                                                        
         TV.SKREVET = TV.SKREVET + 1;                                   
                                                                        
         WRITE FILE (BH9720O) FROM (BH972);                             
                                                                        
 END DAN_DATA_TIL_SLUT;                                                 
